<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
  <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
  <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
  <link href="https://unpkg.com/leaflet@1.9.2/dist/leaflet.css" rel="stylesheet">
  <script src="https://unpkg.com/leaflet@1.9.2/dist/leaflet.js"></script>
  <link rel="stylesheet" href="./resources/css/kvot.css">  
  <link rel="icon" type="image/x-icon" href="./resources/images/favicon.ico">
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <script src="https://cdn.plot.ly/plotly-2.14.0.min.js"></script>
  <script src="./resources/js/erf.js"></script>
  <title>kvot ab - lognormal conversions</title>
</head>
<body>
  <header></header>
  <div class="content">
    <div id="chart" class="ui-widget-content"><p class="ui-widget-header">I can be dragged only by this handle</p></div>  

    <div id="logn">
      <table cellpadding="0px" border="0" style="table-layout: fixed;width:100%">
        <tr><td>
          <div id="tabs-1">
            <ul>
              <li><a href="#tabs-1-mu">mu</a></li>
              <li><a href="#tabs-1-mean">mean</a></li>
              <li><a href="#tabs-1-GM">GM</a></li>
              <li><a href="#tabs-1-mode">mode</a></li>
              <li><a href="#tabs-1-percentile">percentile</a></li>
              <li><a href="#tabs-1-data">data</a></li>
              <li><a href="#tabs-1-sigma">sigma</a></li>
              <li><a href="#tabs-1-SD">SD</a></li>
              <li><a href="#tabs-1-GSD">GSD</a></li>
              <li><a href="#tabs-1-CV">CV</a></li>
              <li><a href="#tabs-1-error">error factor</a></li>
            </ul>
            <div id="tabs-1-mu">
              <p>mu (\\(\\mu\\)) is the mean of the associated normal distribution.</p>
              <p><input class="arg" id="mu1" value="0" name="Mean of it's natural logarithm" title="Please provide the mean of it's natural logarithm."></p>
            </div>
            <div id="tabs-1-mean">
              <p><input class="arg" id="mean1" value="1" name="Arithmetic mean" title="Please provide the arithmetic mean."></p>
            </div>
            <div id="tabs-1-GM">
              <p><input class="arg" id="GM1" value="1" name="Geometric mean" title="Please provide the geometric mean."></p>
            </div>
            <div id="tabs-1-mode">
              <p><input class="arg" id="mode1" value="1" name="Mode" title="Please provide the mode."></p>
            </div>
            <div id="tabs-1-percentile">
              <p><input class="arg" id="p1" type="number" value="5" name="Percentile" title="Please provide a percentile.">
                <input class="arg" id="x1" value="0" name="Value" title="Please provide corresponding value."></p>
            </div>
            <div id="tabs-1-data">
              <p><input class="arg" id="data" value="" name="Data" title="Please provide raw data."></p>
            </div>
            <div id="tabs-1-sigma">
              <p>sigma (\\(\\sigma\\)) is the standard deviation of the associated normal distribution.</p>
              <p><input class="arg" id="sigma1" value="1" name="Standard deviation of it's natural logarithm" title="Please provide the standard deviation of it's natural logarithm."></p>
            </div>
            <div id="tabs-1-SD">
              <p><input class="arg" id="SD1" value="0" name="Standard deviation" title="Please provide the arithmetic standard deviation."></p>
            </div>
            <div id="tabs-1-GSD">
              <p><input class="arg" id="GSD1" value="1" name="Geometric mean" title="Please provide the geometric standard deviation."></p>
            </div>
            <div id="tabs-1-CV">
              <p><input class="arg" id="CV1" value="1" name="Coefficient of variation" title="Please provide the coefficient of variation."></p>
            </div>
            <div id="tabs-1-error">
              <p><input class="arg" id="error1" value="1" name="Error factor" title="Please provide the error factor."></p>
            </div>
          </div>
        </td></tr>
        <tr><td>
          <div id="tabs-2">
            <ul>
              <li><a href="#tabs-2-mu">mu</a></li>
              <li><a href="#tabs-2-mean">mean</a></li>
              <li><a href="#tabs-2-GM">GM</a></li>
              <li><a href="#tabs-2-mode">mode</a></li>
              <li><a href="#tabs-2-percentile">percentile</a></li>
              <li><a href="#tabs-2-sigma">sigma</a></li>
              <li><a href="#tabs-2-SD">SD</a></li>
              <li><a href="#tabs-2-GSD">GSD</a></li>
              <li><a href="#tabs-2-CV">CV</a></li>
              <li><a href="#tabs-2-error">error factor</a></li>
            </ul>
           <div id="tabs-2-mu">
              <p>mu (\\(\\mu\\)) is the mean of the associated normal distribution.</p>
              <p><input class="arg" id="mu2" value="0" name="Mean of it's natural logarithm" title="Please provide the mean of it's natural logarithm."></p>
            </div>
            <div id="tabs-2-mean">
              <p><input class="arg" id="mean2" value="1" name="Arithmetic mean" title="Please provide the arithmetic mean."></p>
            </div>
            <div id="tabs-2-GM">
              <p><input class="arg" id="GM2" value="1" name="Geometric mean" title="Please provide the geometric mean."></p>
            </div>
            <div id="tabs-2-mode">
              <p><input class="arg" id="mode2" value="1" name="Mode" title="Please provide the mode."></p>
            </div>
            <div id="tabs-2-percentile">
              <p><input class="arg" id="p2" type="number" value="5" name="Percentile" title="Please provide a percentile.">
                <input class="arg" id="x2" value="0" name="Value" title="Please provide corresponding value."></p>
            </div>
            <div id="tabs-2-sigma">
              <p>sigma (\\(\\sigma\\)) is the standard deviation of the associated normal distribution.</p>
              <p><input class="arg" id="sigma2" value="1" name="Standard deviation of it's natural logarithm" title="Please provide the standard deviation of it's natural logarithm."></p>
            </div>
            <div id="tabs-2-SD">
              <p><input class="arg" id="SD2" value="0" name="Standard deviation" title="Please provide the arithmetic standard deviation."></p>
            </div>
            <div id="tabs-2-GSD">
              <p><input class="arg" id="GSD2" value="1" name="Geometric mean" title="Please provide the geometric standard deviation."></p>
            </div>
            <div id="tabs-2-CV">
              <p><input class="arg" id="CV2" value="1" name="Coefficient of variation" title="Please provide the coefficient of variation."></p>
            </div>
            <div id="tabs-2-error">
              <p><input class="arg" id="error2" value="1" name="Error factor" title="Please provide the error factor."></p>
            </div>
          </div>
        </td></tr>
      </table>
      <table cellpadding="0px" border="0" style="table-layout: fixed;width:100%">
        <tr><td style="width:100px"></td><td style="width:160px"></td><td style="width:260px"><td ></td></td></tr>
        <tr>
          <td colspan="2" >Mean of it's natural logarithm (\\(\\mu\\))</td>
          <td>Standard deviation of it's natural logarithm (\\(\\sigma\\))</td>
          <td rowspan="13"></td>
        </tr> 
        <tr><td colspan="2"></td><td></td></tr> 
        <tr>
          <td colspan="2">Geometric mean (\\(\\mu_g\\))</td>
          <td >Geometric standard deviation (\\(\\sigma_g\\))</td>
        </tr> 
        <tr><td colspan="2"></td><td></td></tr> 
        <tr>
          <td colspan="2">Arithmetic mean (\\(\\mu_a\\))</td>
          <td>Arithmetic standard deviation (\\(\\sigma_a\\))</td>
        </tr>  
        <tr><td colspan="2"></td><td></td></tr> 
        <tr>
          <td colspan="2">Percentile (\\(p_1\\)) Corresponding value (\\(x_1\\))</td>
          <td>Percentile (\\(p_2\\)) Corresponding value (\\(x_2\\))</td>
        </tr> 
        <tr><td colspan="2"></td><td></td></tr>   
        <tr><td style="text-align:right;">\\(\\mu=\\)</td><td colspan="2">\\(\\ln{\\mu_g}\\)</td></tr> 
        <tr><td style="text-align:right;">\\(=\\)</td><td colspan="2">\\(\\ln{(\\mu_a^2/\\sqrt{\\mu_a^2+\\sigma_a^2})}\\)</td></tr>  
        <tr><td style="text-align:right;">\\(\\sigma=\\)</td><td colspan="2">\\(\\ln{\\sigma_g}\\)</td></tr>  
        <tr><td style="text-align:right;">\\(=\\)</td><td colspan="2">\\(\\sqrt{\\ln{(1+\\sigma_a^2/\\mu_a^2)}}\\)</td></tr>  
        <tr><td style="text-align:right;">\\(\\mu_g=\\)</td><td colspan="2">\\(e^{\\mu}\\)</td></tr>  
        <tr><td style="text-align:right;">\\(=\\)</td><td colspan="2">\\(e^{\\ln{\\mu_a}-\\ln{(1+\\sigma_a^2/\\mu_a^2)}/2}\\)</td></tr> 
        <tr><td style="text-align:right;">\\(\\sigma_g=\\)</td><td colspan="2">\\(e^{\\sigma}\\)</td></tr>  
        <tr><td style="text-align:right;">\\(=\\)</td><td colspan="2">\\(e^{\\sqrt{\\ln{(1+\\sigma_a^2/\\mu_a^2)}}}\\)</td></tr> 
        <tr><td style="text-align:right;">\\(\\mu_a=\\)</td><td colspan="2">\\(e^{\\mu+\\sigma^2/2}\\)</td></tr>  
        <tr><td style="text-align:right;">\\(=\\)</td><td colspan="2">\\(e^{\\ln{\\mu_g}+{\\ln{\\sigma_g}}^2/2}\\)</td></tr> 
        <tr><td style="text-align:right;">\\(\\sigma_a=\\)</td><td colspan="2">\\(\\sqrt{(e^{{\\sigma}^2}-1)e^{2\\mu+{\\sigma}^2}}\\)</td></tr>  
        <tr><td style="text-align:right;">\\(=\\)</td><td colspan="2">\\(e^{\\mu+\\sigma^2/2}(e^{\\sigma^2}-1)\\)</td></tr> 
        <tr><td style="text-align:right;">\\(=\\)</td><td colspan="2">\\(\\sqrt{(e^{{\\ln{\\sigma_g}}^2}-1)e^{2\\ln{\\mu_g}+{\\ln{\\sigma_g}}^2}}\\)</td></tr> 
        <tr><td style="text-align:right;">\\(=\\)</td><td colspan="2">\\(CV\\mu_a\\)</td></tr> 
        <tr><td style="text-align:right;">\\(=\\)</td><td colspan="2">\\(\\mu_a\\sqrt{e^{\\sigma^2}-1}\\)</td></tr> 
        <tr><td style="text-align:right;">\\(mode=\\)</td><td colspan="2">\\(e^{\\mu-\\sigma^2}\\)</td></tr>  
        <tr><td style="text-align:right;">\\(=\\)</td><td colspan="2">\\(\\mu_ge^{-\\sigma^2}\\)</td></tr> 
        <tr><td style="text-align:right;">\\(CV=\\)</td><td colspan="2">\\(\\sqrt{e^{\\sigma^2}-1}\\)</td></tr>  
        <tr><td style="text-align:right;">\\(=\\)</td><td colspan="2">\\(\\sigma_a/\\mu_a\\)</td></tr> 
        <tr><td style="text-align:right;">\\(skewness=\\)</td><td colspan="2">\\(CV^3+3CV\\)</td></tr> 
        <tr><td style="text-align:right;">\\(kurtosis=\\)</td><td colspan="2">\\(CV^8+6CV^6+15CV^4+16CV^2\\)</td></tr> 
        <tr><td style="text-align:right;">\\(kurtosis=\\)</td><td colspan="2">\\(e^{j\\mu+j^2\\sigma^2/2}\\)</td></tr> 
        <tr><td style="text-align:right;">\\(entropy=\\)</td><td colspan="2">\\({(1+\\ln{(2\\pi\\sigma^2)})}/2+\\mu\\)</td></tr> 
      </table>
    </div>

    <div id="map"></div>
  </div>

  <footer></footer>

  <script src="./resources/js/site.js"></script>
  <script>
    // Render shared components
    KVOT.renderHeader('lognormal conversions');
    KVOT.renderNav('logn.html');
    KVOT.renderFooter();
    KVOT.initMap('map');

    var tab1 = "mu";
    var tab2 = "sigma";

    var $tabs2 = $('#tabs-2').tabs({
      active: 5,
      activate: function(event,ui){
        tab2 = ui.newTab.text();
      }
    });
    var $tabs1 = $('#tabs-1').tabs({
      activate: function(event,ui){
        tab1 = ui.newTab.text();
        switch (tab1) {
          case "mu":
          case "GM":
            $tabs2.tabs({ disabled: [0,2,6] }); 
            switch ($tabs2.tabs('option','active')) {
              case 0:case 2:case 6:
                $tabs2.tabs('option','active',(tab1==="GM" ? 7 : 5));
                break;
            }
            break;
          case "mean":
            $tabs2.tabs({ disabled: [1] }); 
            switch ($tabs2.tabs('option','active')) {
              case 1:
                $tabs2.tabs('option','active',6);
                break;
            }
            break;
          case "mode":
            $tabs2.tabs({ disabled: [3] }); 
            switch ($tabs2.tabs('option','active')) {
              case 3:
                $tabs2.tabs('option','active',6);
                break;
            }
            break;
          default:
            $tabs2.tabs({ disabled: [] }); 
            break;
        }
        if (tab1==="data") {
          $tabs2.hide();
        } else {
          $tabs2.show();
        }
      }
    });

    $(function() {
      $("#chart").draggable({ handle: "p"});
      $("#chart").resizable({
        maxHeight: 250,
        maxWidth: 350,
        minHeight: 150,
        minWidth: 150
      });
    });

    function getMuSigma(args){
      var mu;
      var sigma;
      let keys = Object.keys(args);
      switch (keys[0]) {
        case "mu":
          mu = args.mu;
          switch (keys[1]) {
            case "mean":        sigma = Math.sqrt((Math.log(args.mean)-mu)*2); break;
            case "mode":        sigma = Math.sqrt(mu-Math.log(args.mode)); break;
            case "p": case "x": sigma = (Math.log(args.x)-mu)/(Math.exp(args.p/100)); break;
            case "sigma":       sigma = args.sigma; break;      
            case "GSD":         sigma = Math.log(args.GSD); break;
            case "CV":          sigma = Math.sqrt(Math.log((args.CV**2)+1)); break;
            case "error_factor":sigma = Math.log(args.error_factor)/1.645; break;
          }
        break;
        case "mean":
          switch (keys[1]) {
            case "GM":          sigma = Math.sqrt(2*Math.log(args.mean/args.GM));  break;
            case "mode":        sigma = Math.sqrt(2*Math.log(args.mean/args.mode)/3); break;
            case "p": case "x": 
              if (args.mean<args.x) {
                sigma = args.p/100 + Math.sqrt(((args.p/100)**2) + 2 * Math.log(args.mean / args.x));
              } else if (args.mean>args.x) {
                sigma = args.p/100 - Math.sqrt(((args.p/100)**2) + 2 * Math.log(args.mean / args.x));
              }
              break;
            case "sigma":       sigma = args.sigma; break;         
            case "SD":          sigma = Math.sqrt(Math.log((args.SD**2)/(args.mean**2)+1)); break;
            case "GSD":         sigma = Math.log(args.GSD); break;
            case "CV":          sigma = Math.sqrt(Math.log((args.CV**2)+1)); break;
            case "error_factor":sigma = Math.log(args.error_factor)/1.645; break;
          }
          mu = Math.log(args.mean)-(sigma**2)/2;
        break;
        case "mode":
          switch (keys[1]) {
            case "p": case "x": 
              if (args.mode<args.x) {
                sigma = (-args.p/100 - Math.sqrt((args.p/100)**2 - 4 * Math.log(args.mode / args.x))) / 2;
              } else if (args.mode>args.x) {
                sigma = (-args.p/100 + Math.sqrt((args.p/100)**2  - 4 * Math.log(args.mode / args.x))) / 2;
              }
              break;
            case "sigma":       sigma = args.sigma; break;         
            case "SD":          sigma = Math.sqrt(Math.log((args.SD**2)/(args.mean**2)+1)); break;
            case "GSD":         sigma = Math.log(args.GSD); break;
            case "CV":          sigma = Math.sqrt(Math.log((args.CV**2)+1)); break;
            case "error_factor":sigma = Math.log(args.error_factor)/1.645; break;
          }
          mu = Math.log(args.mode)+sigma**2;
        break;
        case "p1":
        case "x1":
          sigma = Math.log(args.x1 / args.x2) / (args.p1/100 - args.p2/100); 
          mu = Math.log(args.x1) + Math.log(args.x2 / args.x1) * (0-args.p1/100) / (args.p2/100-args.p1/100); 
        break;      
      }
      return [mu,sigma];
    }

    function updatedInput(){
      var args = {};
      var mu;
      var sigma;
      switch (tab1) {
        case "mu":
        case "GM":
          if (tab1==="mu") {
            args.mu = +document.getElementById("mu1").value;        
          } else {
            let GM = +document.getElementById("GM1").value;
            args.mu = Math.log(GM);        
          }
          switch (tab2) {
            case "mean": args.mean = +document.getElementById("mean2").value; break;
            case "mode": args.mode = +document.getElementById("mode2").value; break;
            case "percentile": args.p = +document.getElementById("p2").value; args.x = +document.getElementById("x2").value; break;
            case "sigma": args.sigma = +document.getElementById("sigma2").value; break;      
            case "GSD": args.GSD = +document.getElementById("GSD2").value; break;
            case "CV": args.CV = +document.getElementById("CV2").value; break;
            case "error factor": args.error_factor = +document.getElementById("error").value; break;
          }
          break;
        case "mean":
          args.mean = +document.getElementById("mean1").value;
          switch (tab2) {
            case "mu": args = {mu: +document.getElementById("mu2").value,"mean":args.mean}; break;
            case "GM": args.GM = +document.getElementById("GM2").value; break;
            case "mode": args.mode = +document.getElementById("mode2").value; break;
            case "percentile": args.p = +document.getElementById("p2").value; args.x = +document.getElementById("x2").value; break;
            case "sigma": args.sigma = +document.getElementById("sigma2").value; break;
            case "SD": args.SD = +document.getElementById("SD2").value; break;
            case "GSD": args.GSD = +document.getElementById("GSD2").value; break;
            case "CV": args.CV = +document.getElementById("CV2").value; break;
            case "error factor": args.error_factor = +document.getElementById("error").value; break;
          }
          break;
        case "mode":
          args.mode = +document.getElementById("mode1").value;
          switch (tab2) {
            case "mu": args = {mu: +document.getElementById("mu2").value,"mode":args.mode}; break;
            case "GM": args = {mu: Math.log(+document.getElementById("GM2").value),"mode":args.mode}; break;
            case "mean": args = {mean: Math.log(+document.getElementById("mean2").value),"mode":args.mode}; break;
          }
          break;
        case "percentile":
            args.p1 = +document.getElementById("p1").value;
            args.x1 = +document.getElementById("x1").value;
          switch (tab2) {
            case "mu": args = {mu: +document.getElementById("mu2").value,"p":args.p1,"x":args.x1}; break;
            case "GM": args = {mu: Math.log(+document.getElementById("GM2").value),"p":args.p1,"x":args.x1}; break;
            case "mean": args = {mean: +document.getElementById("mean2").value,"p":args.p1,"x":args.x1}; break;
            case "percentile": args.p2 = +document.getElementById("p2").value; args.x2 = +document.getElementById("x2").value; break;
          }
          break;
        case "data":
          let data = +document.getElementById("data").value;
          break;
      }
      [mu,sigma] = getMuSigma(args);
      let txt = '';
      txt += 'mu ' + mu + '\n';
      txt += 'sigma ' + sigma + '\n';
      txt += 'Mean ' + Math.exp(mu+(sigma**2)/2) + '\n';
      txt += 'Median ' + Math.exp(mu) + '\n';
      txt += 'Mode ' + Math.exp(mu-sigma**2) + '\n';
      txt += 'Standard deviation ' + Math.sqrt((Math.exp(sigma**2)-1)*Math.exp(2*mu+(sigma**2))) + '\n';
      txt += 'Variance ' +                     (Math.exp(sigma**2)-1)*Math.exp(2*mu+(sigma**2)) + '\n';
      txt += 'Geometric standard deviation ' + Math.exp(sigma) + '\n';
      let CV = Math.sqrt(Math.exp(sigma**2)-1);
      txt += 'CV ' + CV + '\n';
      txt += 'Skewness ' + (Math.pow(CV,3)+3*CV) + '\n';
      txt += 'Kurtosis ' + (Math.pow(CV,8)+6*Math.pow(CV,6)+15*Math.pow(CV,4)+16*Math.pow(CV,2)) + '\n';
      txt += 'Entropy ' + ((1+Math.log(2*Math.PI*sigma**2))/2+mu) + '\n';
      txt += 'Error factor ' + Math.exp(sigma*1.645); + '\n';
      console.log(txt);

      let n = 1000;
      let p = linspace(0,0.99,n);
      let p5 = linspace(0,0.05,n);
      let p95 = linspace(0.95,0.99,n);
      let x = new Array();
      let y = new Array();
      let x5 = new Array();
      let y5 = new Array();
      let x95 = new Array();
      let y95 = new Array();
      for (let i=1;i<n;i++){
        x[i] = logninv(mu,sigma,p[i]);
        y[i] = lognpdf(mu,sigma,x[i]);
        x5[i] = logninv(mu,sigma,p5[i]);
        y5[i] = lognpdf(mu,sigma,x5[i]);
        x95[i] = logninv(mu,sigma,p95[i]);
        y95[i] = lognpdf(mu,sigma,x95[i]);
      }

      CHART = document.getElementById('chart');
      Plotly.newPlot( CHART, [ 
        { x: x, y: y, fill: 'tozeroy', fillcolor: 'rgba(243,184,123,0.5)', line: { color: '#f3b87b' }, type: 'scatter' },
        { x: x5, y: y5, fill: 'tozeroy', fillcolor: 'rgba(243,184,123,0.5)', line: { color: '#f3b87b' }, type: 'scatter' },
        { x: x95, y: y95, fill: 'tozeroy', fillcolor: 'rgba(243,184,123,0.5)', line: { color: '#f3b87b' }, type: 'scatter' },
        { x:[Math.exp(mu+(sigma**2)/2),Math.exp(mu+(sigma**2)/2)], y:[0,lognpdf( mu, sigma, Math.exp(mu+(sigma**2)/2) )], hovertext:'Mean', mode:'lines', line: { color: '#f3b87b', dash:'solid' }},
        { x:[Math.exp(mu),Math.exp(mu)], y:[0,lognpdf( mu, sigma, Math.exp(mu) )], hovertext:'50%', mode:'lines', line: { color: '#f3b87b', dash:'dot' }},
      ], {
        autosize: true,
        responsive: true,
        showlegend: false,
        xaxis: { type: 'lin', range: [x[0],x[n-1]] },  
        margin: { t: 0, r: 0, b:20, l:40, autoexpand:false },
        paper_bgcolor: 'rgba(0,0,0,0)',
        plot_bgcolor: 'rgba(0,0,0,0)'
      });
    }

    // loop through each arg-input and add an input event listener
    document.querySelectorAll(".arg").forEach(function(input) {
      input.addEventListener("input", function() { updatedInput(); });
    });

    function unifinv( a, b, p ){ return a+(b-a)*p;}
    function norminv( mu, sigma, p ){ return -Math.sqrt(2)*erfcinv(2*p)*sigma+mu;}
    function normcdf( mu, sigma, x ){ return 0.5*erfc(-(x-mu)/sigma/Math.sqrt(2));}
    function normpdf( mu, sigma, x ){ return Math.exp(-0.5*((x-mu)/sigma)**2)/(Math.sqrt(2*Math.PI)*sigma);}
    function logninv( mu, sigma, p ){ return Math.exp(sigma*(-Math.sqrt(2)*erfcinv(2*p))+mu);}
    function logncdf( mu, sigma, x ){ return 0.5*erfc(-(Math.log(x)-mu)/sigma/Math.sqrt(2));}
    function lognpdf( mu, sigma, x ){ return Math.exp(-0.5*((Math.log(x)-mu)/sigma)**2)/(x*Math.sqrt(2*Math.PI)*sigma);}

    window.onresize = function() {
      Plotly.Plots.resize(CHART);
    };

    function linspace(startValue, stopValue, cardinality) {
      var arr = [];
      var step = (stopValue - startValue) / (cardinality - 1);
      for (var i = 0; i < cardinality; i++) {
        arr.push(startValue + (step * i));
      }
      return arr;
    }
  </script>
</body>
</html>
